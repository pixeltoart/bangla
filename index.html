<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Bangla Date Converter – Updated</title>
<link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;600&display=swap" rel="stylesheet">
<style>
 body { font-family:'Hind Siliguri', sans-serif; margin:0; padding:0;
        background: linear-gradient(135deg,#4b6cb7,#182848); color:#fff; height:100vh; display:flex; flex-direction:column; transition:0.3s; }
 .dark { background:#0b0b0b; color:#eee; }
 .topbar{ width:100%; padding:16px; text-align:center; background:rgba(255,255,255,0.08); backdrop-filter:blur(8px); font-weight:700; display:flex; justify-content:center; gap:20px; align-items:center; }
 .toggleBtn{ padding:6px 16px; border-radius:10px; border:none; cursor:pointer; background:#ffd740; font-weight:700; }
 .main{ flex:1; display:flex; }
 .left{ flex:3; display:flex; align-items:center; justify-content:center; padding:30px; }
 .card{ width:90%; max-width:600px; background:rgba(255,255,255,0.12); padding:40px; border-radius:18px; text-align:center; }
 input{ width:84%; padding:12px 14px; font-size:18px; border-radius:10px; border:none; outline:none; }
 button{ padding:12px 30px; margin-top:18px; border-radius:10px; border:none; background:#ffcc00; font-weight:700; cursor:pointer; }
 .result{ margin-top:22px; background:rgba(255,255,255,0.18); padding:16px; border-radius:10px; color:#07203b; font-weight:700; }
 .right{ flex:1; background:rgba(255,255,255,0.08); padding:26px; border-left:2px solid rgba(255,255,255,0.06); }
 .right h3{ margin-top:0; }
 .right input{ width:100%; }
 .footer{ padding:10px; text-align:center; background:rgba(0,0,0,0.18); }
 .footer a{ color:#ffeb3b; text-decoration:none; font-weight:700; }
 @media(max-width:900px){ .main{flex-direction:column;} .right{border-left:none;border-top:2px solid rgba(255,255,255,0.06);} }
</style>
</head>
<body>

<div class="topbar" id="todayTop">Loading...
 <button class="toggleBtn" onclick="toggleMode()">Day/Night</button>
</div>

<div class="main">
  <div class="left">
    <div class="card">
      <h2>বাংলা তারিখ কনভার্টার</h2>
      <input type="date" id="gdate">
      <br>
      <button id="convertBtn">রূপান্তর করুন</button>
      <div id="output" class="result">বার: —<br>বাংলা তারিখ: —<br>বঙ্গাব্দ: —</div>
    </div>
  </div>

  <div class="right">
    <h3>কীভাবে গণনা করা হয়?</h3>
    প্রথম ৬ মাস (বৈশাখ→আশ্বিন) = ৩১ দিন।<br>
    পরবর্তী ৪ মাস (কার্তিক→মাঘ) = ৩০ দিন।<br>
    ফাল্গুন = ২৯ দিন (লিপে ৩০)।<br>
    চৈত্র = ৩০ দিন।<br><br>
    বাংলা বছর শুরু: ১৪ এপ্রিল।

    <hr style="margin:20px 0; opacity:0.4;">

    <h3>Age Calculator</h3>
    <label>জন্ম তারিখ:</label>
    <input type="date" id="birthDate"><br><br>

    <label>যে তারিখে বয়স গণনা করবেন:</label>
    <input type="date" id="ageToDate"><br>

    <button onclick="calcAge()">Calculate</button>

    <div id="ageResult" class="result" style="background:rgba(255,255,255,0.15); color:#07203b;">
        বয়স: —
    </div>
  </div>
</div>

<div class="footer">Design By <a href="https://fb.com/bdthemex" target="_blank">BDthemeX</a></div>

<script>
const WEEK=["রবিবার","সোমবার","মঙ্গলবার","বুধবার","বৃহস্পতিবার","শুক্রবার","শনিবার"];
const BN_MONTHS=["বৈশাখ","জ্যৈষ্ঠ","আষাঢ়","শ্রাবণ","ভাদ্র","আশ্বিন","কার্তিক","অগ্রহায়ণ","পৌষ","মাঘ","ফাল্গুন","চৈত্র"];
const BN_DIGITS={'0':'০','1':'১','2':'২','3':'৩','4':'৪','5':'৫','6':'৬','7':'৭','8':'৮','9':'৯'};
function toBanglaDigits(n){return String(n).split('').map(c=>BN_DIGITS[c]??c).join('');}
function isGregorianLeap(y){return ((y%4===0)&&(y%100!==0))||(y%400===0);} 

function toBanglaRevised(gdate){
 if(!(gdate instanceof Date)||isNaN(gdate.getTime()))return null;
 const y=gdate.getFullYear(),m=gdate.getMonth(),d=gdate.getDate();
 const gday=Date.UTC(y,m,d);
 let startYear=y;
 const startBD=Date.UTC(startYear,3,14);
 if(gday<startBD) startYear--;
 const startUTC=Date.UTC(startYear,3,14);
 const daysSince=Math.floor((gday-startUTC)/(86400000));
 const falgunLen=isGregorianLeap(startYear+1)?30:29;
 const monthLengths=[31,31,31,31,31,31,30,30,30,30,falgunLen,30];
 let rem=daysSince,mi=0;
 while(mi<12&&rem>=monthLengths[mi]){rem-=monthLengths[mi];mi++;}
 if(mi>=12){mi=11;rem=monthLengths[11]-1;}
 return{year:startYear-593,monthIndex:mi,day:rem+1};
}

const input=document.getElementById('gdate');
const out=document.getElementById('output');
const convertBtn=document.getElementById('convertBtn');
const topbar=document.getElementById('todayTop');

(function init(){
 const now=new Date();
 input.value=now.toISOString().slice(0,10);
 document.getElementById("ageToDate").value=now.toISOString().slice(0,10);
 renderForDate(now);
})();

function renderForDate(jsDate){
 const d=new Date(jsDate.getFullYear(),jsDate.getMonth(),jsDate.getDate());
 const b=toBanglaRevised(d);
 if(!b){out.innerHTML="বার: —<br>বাংলা তারিখ: —<br>বঙ্গাব্দ: —"; return;}
 const week=WEEK[d.getDay()];
 out.innerHTML=`বার: <b>${week}</b><br>বাংলা তারিখ: <b>${toBanglaDigits(b.day)} ${BN_MONTHS[b.monthIndex]}</b><br>বঙ্গাব্দ: <b>${toBanglaDigits(b.year)}</b>`;
 const en=d.toLocaleDateString('en-US',{day:'numeric',month:'long',year:'numeric'});
 topbar.innerHTML=`আজ: <b>${en}</b> | <b>${week}, ${toBanglaDigits(b.day)} ${BN_MONTHS[b.monthIndex]}, ${toBanglaDigits(b.year)}</b>`;
}

convertBtn.addEventListener('click',()=>{
 const v=input.value; if(!v)return;
 renderForDate(new Date(v+'T00:00:00'));
});

function calcAge(){
 const b=document.getElementById("birthDate").value;
 const t=document.getElementById("ageToDate").value;
 if(!b||!t){alert("দুইটি তারিখই সিলেক্ট করুন");return;}
 const birth=new Date(b), today=new Date(t);
 let y=today.getFullYear()-birth.getFullYear();
 let m=today.getMonth()-birth.getMonth();
 let d=today.getDate()-birth.getDate();
 if(d<0){m--; d+=new Date(today.getFullYear(),today.getMonth(),0).getDate();}
 if(m<0){y--; m+=12;}
 document.getElementById("ageResult").innerHTML=`বয়স: <b>${toBanglaDigits(y)} বছর, ${toBanglaDigits(m)} মাস, ${toBanglaDigits(d)} দিন</b>`;
}

function toggleMode(){ document.body.classList.toggle('dark'); }
</script>
</body>
</html>
